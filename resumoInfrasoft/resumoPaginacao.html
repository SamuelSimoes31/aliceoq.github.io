<!DOCTYPE html>
<html>
    <head>
        <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;400&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@700&display=swap" rel="stylesheet">   
        <link rel="stylesheet" href="styleResumo2.css">
        <meta charset="UTF-8">
        <title>Pagina√ß√£o e segmenta√ß√£o</title>
    </head>
    <body>
        <div id="contentBox">
            <div id="titleBox">
                <a href="index.html">‚¨Ö voltar resum√£o</a>
                <h1>ü§ì RESUMO: Pagina√ß√£o e segmenta√ß√£o üíª</h1>
                <p class="subtitle">Substitui√ß√£o de p√°ginas</p>
            </div>

            <h2>üò™ RESUMO DO RESUMO üòé</h2>
            <ul>
                <li>Na forma mais simples de mem√≥ria virtual, cada espa√ßo de endere√ßamento de um processo √© dividido em p√°ginas de tamanho uniforme.</li>
                <li>Dois dos melhores algoritmos de substitui√ß√£o de p√°ginas s√£o o Envelhecimento (aging) e o WSClock.</li>
                <li>No projeto de sistemas de pagina√ß√£o, a escolha de um algoritmo n√£o √© suficiente, precisamos considerar: aloca√ß√£o e tamanho de p√°gina.</li>
                <li>Segmenta√ß√£o ajuda a lidar com estruturas de dados que mudam de tamanho durante a execu√ß√£o, simplifica o compartilhamento e permite prote√ß√£o diferente para segmentos diferentes.</li>
                <li>Segmenta√ß√£o e pagina√ß√£o podem ser combinados para fornecer uma mem√≥ria virtual de duas dimens√µes.</li>
            </ul>

            <h2>ü•µ Resumo n√£o resumido ü•µ</h2>
            <h2>Substitui√ß√£o de p√°ginas</h2>
            <p>A pagina√ß√£o foi inventada para fornecer um grande espa√ßo de endere√ßamento linear sem a necessidade
                de comprar mais mem√≥ria f√≠sica.
            </p>
            <ul>
                <li>Falta de p√°gina (page-fault) na mem√≥ria.</li>
                <li>A p√°gina modificada deve primeiro ser salva (se n√£o foi modificada √© apenas sobreposta).</li>
                <li>Melhor n√£o escolher uma p√°gina que est√° sendo muito usada.</li>
            </ul>

            <h2>Algoritmos de substitui√ß√£o de p√°ginas</h2>
            <p>√ìtimo: procura substituir o mais tarde poss√≠vel - impratic√°vel.</p>
            <ul>Algoritmos existentes:
                <li>First-In, First-Out (FIFO).</li>
                <li>Not Recently Used (NRU).</li>
                <li>Segunda chance (SC).</li>
                <li>Least Recently Used (LRU).</li>
                <li>Conjunto de trabalho (Working Set - WS).</li>
                <li>Rel√≥gio (Clock).</li>
                <li>WSClock.</li>
            </ul>
            
            <h2>N√£o Usada Recentemente (NUR/NRU)</h2>
            <ul>
                <li>Cada p√°gina tem os bits Referenciada (R) e Modificada (M).
                    <ul>
                        <li>Bits s√£o colocados em 1 quando a p√°gina √© referenciada e modificada.</li>
                        <li>Bit R √© limpo peridiodicamente.</li>
                    </ul>
                </li>
                <li>As p√°ginas s√£o classificadas: referenciada ou n√£o / modificada ou n√£o.</li>
                <li>NUR remove p√°gina aleatoriamente da classe de ordem mais baixa que n√£o esteja vazia.</li>
            </ul>

            <h2>Primeira a Entrar, Primeira a Sair (FIFO)</h2>
            <ul>
                <li>Mant√©m uma lista encadeada de todas as p√°ginas.</li>
                <li>Na ocorr√™ncia de falta de p√°gina: a mais antiga √© removida (a cabe√ßa da lista)</li>
                <li>Desvantagem: a mais antiga pode ser usada com muita frequ√™ncia.</li>
            </ul>
            
            <h2>Segunda chance (SC)</h2>
            <img src="images/segundaChance.png" alt="segundaChance">
            <p>Opera√ß√£o do algoritmo segunda chance:</p>
            <ol type="a">
                <li>lista de p√°ginas em ordem FIFO</li>
                <li>estado da lista em situa√ß√£o de falta de p√°gina no instante 20, com o bit R da p√°gina A em 1 (o bit √© modificado para 0).</li>
            </ol>

            <h2>Rel√≥gio</h2>
            <img src="images/relogio.png" alt="">
            <p>Otimiza√ß√£o simples do algoritmo Segunda Chance.</p>
        
            <h2>Menos Recentemente Usada (MRU/LRU)</h2>
            <ul>
                <li>Considera que p√°ginas usadas recentemente logo ser√£o usadas novamente.
                    Retira da mem√≥ria a p√°gina que h√° mais tempo n√£o √© usada.</li>
                <li>Idealmente, usa hardware especial.
                    <ul>
                        <li>Contador especial incrementado a cada instru√ß√£o.</li>
                        <li>Ou uma matriz NxN, onde N √© o n√∫mero de p√°ginas na mem√≥ria.</li>
                    </ul>
                </li>
            </ul>

            <h2>LRU em Software</h2>
            <ul>
                <li>NFU (Not Frequently Used): cada p√°gina tem um contador (software) incrementado com R quando √© usada.</li>
                <li>Envelhecimento (Aging): a cada interrup√ß√£o de rel√≥gio desloca o contador para a direita e coloca o valor
                    de R no bit mais significativo.</li>
            </ul>
            <img src="images/lru.png" alt="lru envelhecimento">

            <h2>WSClock</h2>
            <img src="images/wsclock.png" alt="wsclock">
            <p>Acessa a tabela de p√°ginas de forma circular e j√° remove a primeira p√°gina que satisfaz a condi√ß√£o de remo√ß√£o.</p>
            <p>Se n√£o houver nenhuma p√°gina ideal, pega a p√°gina que foi acessada h√° mais tempo.</p>
            <p>√ìtimo: Impratic√°vel; escolhe exatamente a melhor p√°gina a ser removida, sempre seleciona a p√°gina que n√£o ser√° usada por mais tempo.</p>

            <h2>Controle de carga</h2>
            <ul>
                <li>Sistema ainda pode sofrer pagina√ß√£o excessiva (thrashing)</li>
                <li>Quando alguns processos precisam de mais mem√≥ria, mas nenhum outro precisa de menos.</li>
                <li>Solu√ß√£o: reduzir o n√∫mero de processos na mem√≥ria. Levar para disco, reconsiderar grau de multiprograma√ß√£o.</li>
            </ul>

            <h2>Tamanho de p√°gina</h2>
            <p>Tamanho de p√°gina pequeno:</p>
            <ul>Vantagens:
                <li>menos fragmenta√ß√£o interna</li>
                <li>menos partes n√£o usadas de programas na mem√≥ria</li>
            </ul>
            <ul>Desvantagens:
                <li>programas precisam de mais p√°ginas, tabelas de p√°gina maiores</li>
                <li>mais acessos a disco</li>
            </ul>

            <h2>Espa√ßos separados de instru√ß√µes e dados</h2>
            <img src="images/espacoInst.png" alt="">
            <p>Duplica o espa√ßo de endere√ßamento, permite otimiza√ß√µes na pagina√ß√£o.</p>
        
            <h2>P√°ginas compartilhadas</h2>
            <p>Dois processos que compartilham  as mesmas instru√ß√µes e, por consequ√™ncia, a mesma tabela de p√°ginas para instru√ß√µes.</p>
        
            <h2>Envolvimento do S.O. com pagina√ß√£o</h2>
            <ol>
                <li>Cria√ß√£o de processo
                    <ul>
                        <li>determina tamanho do programa</li>
                        <li>cria tabela de p√°gina</li>
                        <li>cria √°rea de troca (swap area)</li>
                    </ul>
                </li>
                <li>Execu√ß√£o de processo
                    <ul>
                        <li>inicia MMU para novos processos</li>
                        <li>limpa a TLB</li>
                    </ul>
                </li>
                <li>Ocorr√™ncia de falta de p√°gina
                    <ul>
                        <li>determina endere√ßo virtual que causou a falta</li>
                        <li>escolhe e descarta, se necess√°rio, uma p√°gina antiga</li>
                        <li>carrega p√°gina requisitada para a mem√≥ria (swap)</li>
                    </ul>
                </li>
                <li>Termina√ß√£o de processo
                    <ul>
                        <li>Libera tabela de p√°ginas, p√°ginas e espa√ßo em disco que as p√°ginas ocupam.</li>
                    </ul>
                </li>
            </ol>

            <h2>Lidando com uma falta de p√°gina</h2>
            <ol>
                <li>Hardware desvia (trap) a execu√ß√£o para o n√∫cleo, salvando o PC na pilha.</li>
                <li>S.O. determina p√°gina virtual requerida e escalona remo√ß√£o de uma p√°gina da mem√≥ria</li>
                <li>Se a p√°gina foi modificada, escreve para o disco</li>
                <li>Quando a moldura est√° liberada, o SO captura a p√°gina requerida no endere√ßo definido no disco</li>
                <li>Quando a interrup√ß√£o de disco indica que a p√°gina chegou, as tabelas de p√°gina s√£o atualizadas</li>
                <li>PC aponta para a instru√ß√£o que provocou a falta</li>
                <li>Demais registradores e outras informa√ß√µes do processo interrompido s√£o carregados</li>
                <li>Retorna para o espa√ßo de usu√°rio para continuar a execu√ß√£o, como se nenhuma falta tivesse ocorrido</li>
            </ol>

            <h2>Fixa√ß√£o de p√°ginas na mem√≥ria</h2>
            <p>Fixa√ß√£o de p√°ginas envolvidas com E/S na mem√≥ria para evitar problemas.</p>
        
            <h2>Mem√≥ria secund√°ria</h2>
            <ul>
                <li>Podemos manter na √°rea de troca todos os espa√ßos de endere√ßamento das p√°ginas do processo, inclusive as que 
                    est√£o na mem√≥ria principal (Mem√≥ria RAM).
                    <ul>
                        <li>Vantagem: Mapeamento mais simples.</li>
                        <li>Desvantagem: Ocupa mais espa√ßo no disco.</li>
                    </ul>
                </li>
                <li>Podemos manter na √°rea de troca apenas os espa√ßos de endere√ßamento das p√°ginas do processo que n√£o est√£o na 
                    mem√≥ria principal.
                    <ul>
                        <li>Vantagem: Menos espa√ßo ocupado em disco.</li>
                        <li>Desvantagem: Mapeamento mais complexo, pois al√©m da tabela de p√°ginas √© necess√°rio um mapa de disco.</li>
                    </ul>
                </li>
                <li>Qual √© a melhor estrat√©gia depende do que √© mais cr√≠tico no momento.</li>
            </ul>

            <h2>Segmenta√ß√£o</h2>
            <img src="images/segmentacao.png" alt="">
            <p>T√©cnica inventada para permitir que programas e dados sejam quebrados em espa√ßos de endere√ßamento logicamente independentes e para auxiliar o compartilhamento e a prote√ß√£o.</p>
            <ul>
                <li>Compartilhamento de espa√ßo de endere√ßamento.</li>
                <li>Cada processo possui o seu espa√ßo de endere√ßamento, por√©m possui um segmento compartilhado.</li>
                <li>Um segmento √© um espa√ßo da mem√≥ria que mais de um processo pode ter acesso.</li>
                <li>N√£o √© muito utilizada, pois tem um complicador: o gerenciamento deve ser feito pelo programador, n√£o 
                    pelo SO, aumentando a complexidade.</li>
                <li>GDT - Global Descriptor Table: √önica para todo o sistema; tabela do SO onde cada entrada informa os dados 
                    de um segmento, informa√ß√µes sobre todos os segmentos que o SO pode ter.</li>
                <li>LDT - Local Descriptor Table: Uma para cada processo; informa quantos segmentos um processo pode ter acesso.</li>
            </ul>
        </div>
    </body>
</html>
